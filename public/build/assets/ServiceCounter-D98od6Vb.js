import{d as N,f as j,r as b,x as B,h as D,c as v,o as u,a as t,u as e,g as M,b as a,e as i,k as _,j as c,Q as y,s as p,W as g,t as f,i as U,F as A}from"./app-DjmU4WO1.js";import{_ as P}from"./AuthenticatedLayout-DLs5N_Yg.js";import{a as F,s as n}from"./index-DHFx_CwJ.js";import{s as I}from"./index-C3dUI9Id.js";import{s as C}from"./index-BFgpnwwa.js";import{s as h}from"./index-Dri6EmXD.js";import{s as L}from"./index-DXx9oyu9.js";import{s as Q}from"./index-ZxU4Dktz.js";import{s as W}from"./index-CPP9Ks6i.js";import{s as z}from"./index-BCSsZ7UM.js";import"./ApplicationLogo-Bs_TrkV-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-r2m7dZ7t.js";import"./index-EBSvgnxR.js";import"./index-aySLcTLD.js";const T={class:"mx-auto max-w-7xl rounded-lg px-4 py-6 sm:px-6 lg:px-8"},Y={class:"counter-list rounded-lg bg-white p-3 shadow-sm"},G={class:"flex items-center justify-between"},H={class:"flex justify-between"},J={class:"text-sm text-gray-500"},K={class:"flex justify-end gap-2 text-end"},O={class:"inline-flex flex-col gap-2"},R={key:0,class:"text-sm text-red-500"},X={class:"flex justify-between gap-5"},Z={class:"inline-flex flex-col gap-2"},ee={key:0,class:"text-sm text-red-500"},se={class:"inline-flex w-full flex-col gap-2"},te={key:0,class:"text-sm text-red-500"},le={class:"flex justify-between gap-2"},re={class:"flex flex-col items-center"},ie={class:"mt-1 text-sm"},he=N({__name:"ServiceCounter",props:{counters:{},services:{}},setup(oe){const m=j(),d=b(!1),k=b(null),s=B({id:null,name:"",service_id:null,ip_address:null}),w=()=>{s.reset(),d.value=!0},S=o=>{s.id=o.id,s.name=o.name,s.service_id=o.service_id,s.ip_address=o.ip_address,d.value=!0},$=()=>{s.id&&(s.reset(),d.value=!1)},q=()=>{s.id?s.put(`/counter/${s.id}`,{preserveScroll:!0,onSuccess:()=>{m.add({severity:"success",summary:"Success",detail:"Counter updated successfully",life:3e3}),s.reset(),d.value=!1},onError:o=>{console.error("Error updating Counter:",o)}}):s.post("/counter",{preserveScroll:!0,onSuccess:()=>{m.add({severity:"success",summary:"Success",detail:"Counter saved successfully",life:3e3}),s.reset(),d.value=!1},onError:o=>{console.error("Error saving Counter:",o)}})},V=D(),E=o=>{V.require({message:`Are you sure you want to delete this Counter ${o.name} ?`,header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Yes",rejectLabel:"No",acceptClass:"p-button-danger",accept:()=>{g.delete(`/counter/${o.id}`,{preserveScroll:!0,onSuccess:()=>{m.add({severity:"info",summary:"Success",detail:"Counter deleted successfully",life:3e3})},onError:l=>{m.add({severity:"error",summary:"Error",detail:l[0],life:3e3})}})},reject:()=>{k.value=null,m.add({severity:"warn",summary:"Cancelled",detail:"Counter deletion cancelled",life:3e3})}})};return(o,l)=>(u(),v(A,null,[t(e(M),{title:"Counters"}),t(P,null,{header:a(()=>l[4]||(l[4]=[i("h2",{class:"p-2 text-lg font-semibold leading-tight text-gray-800"}," Counters ",-1)])),default:a(()=>[i("div",T,[i("div",Y,[t(e(F),{size:"small",value:o.counters,class:"text-sm"},{header:a(()=>[i("div",G,[l[5]||(l[5]=i("div",{class:"flex items-center gap-2"},[i("h3",{class:"text-lg font-semibold"},"Counters")],-1)),t(e(p),{rounded:"",outlined:"",class:"p-button-sm p-button-success",icon:"pi pi-plus",onClick:w})])]),footer:a(()=>[i("div",H,[i("p",J,f(o.counters.length)+" counters ",1)])]),empty:a(()=>l[6]||(l[6]=[i("div",{class:"text-center"},[i("p",{class:"text-sm text-gray-500"}," No counters found. ")],-1)])),default:a(()=>[t(e(n),{field:"name",header:"Name"}),t(e(n),{field:"service.name",header:"Service"}),t(e(n),{field:"ip_address",header:"IP Address"}),t(e(n),{field:"user.name",header:"Petugas"}),t(e(n),{field:"queues_count",header:"Queues",class:"important text-center"},{body:a(({data:r})=>[r.queues_count?(u(),_(e(y),{key:0,value:r.queues_count,severity:"info"},null,8,["value"])):c("",!0)]),_:1}),t(e(n),{field:"queues_skipped_count",header:"Skip"},{body:a(({data:r})=>[r.queues_skipped_count?(u(),_(e(y),{key:0,value:r.queues_skipped_count,severity:"info"},null,8,["value"])):c("",!0)]),_:1}),t(e(n),{field:"queues_done_count",header:"Done"},{body:a(({data:r})=>[r.queues_done_count?(u(),_(e(y),{key:0,value:r.queues_done_count,severity:"info"},null,8,["value"])):c("",!0)]),_:1}),t(e(n),{field:"last_queue_called.number",header:"Calling Number"}),t(e(n),{"header-class":"text-center",sortable:!1},{body:a(({data:r})=>[i("div",K,[t(e(p),{rounded:"",icon:"pi pi-eye",class:"p-button-sm",outlined:"",severity:"info",onClick:x=>e(g).get(`/counter/${r.id}`)},null,8,["onClick"]),t(e(p),{rounded:"",icon:"pi pi-pencil",class:"p-button-sm",outlined:"",severity:"warn",onClick:x=>S(r)},null,8,["onClick"]),t(e(p),{rounded:"",icon:"pi pi-trash",class:"p-button-sm",outlined:"",severity:"warn",onClick:x=>E(r)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"])]),t(e(I),{visible:d.value,"onUpdate:visible":l[3]||(l[3]=r=>d.value=r),modal:"",header:e(s).id?"Edit Counter":"New Counter",style:{width:"35rem"}},{default:a(()=>[i("form",{class:"flex w-full flex-col gap-4",onSubmit:U(q,["prevent"])},[i("div",O,[t(e(C),{variant:"in"},{default:a(()=>[t(e(h),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":l[0]||(l[0]=r=>e(s).name=r),invalid:!!e(s).errors.name,variant:e(s).name?"filled":"outlined",fluid:""},null,8,["modelValue","invalid","variant"]),l[7]||(l[7]=i("label",{for:"name"},"Name",-1))]),_:1}),e(s).errors.name?(u(),v("span",R,f(e(s).errors.name),1)):c("",!0)]),i("div",X,[i("div",Z,[t(e(L),{class:"w-full md:w-56"},{default:a(()=>[t(e(Q),{id:"service",modelValue:e(s).service_id,"onUpdate:modelValue":l[1]||(l[1]=r=>e(s).service_id=r),options:o.services,"option-value":"id","option-label":"name",placeholder:"Select Service",invalid:!!e(s).errors.service_id,class:"w-full",variant:e(s).service_id?"filled":"outlined"},null,8,["modelValue","options","invalid","variant"]),l[8]||(l[8]=i("label",{for:"service"}," Service ",-1))]),_:1}),e(s).errors.service_id?(u(),v("span",ee,f(e(s).errors.service_id),1)):c("",!0)]),i("div",se,[t(e(C),{variant:"in"},{default:a(()=>[t(e(h),{id:"ip_address",modelValue:e(s).ip_address,"onUpdate:modelValue":l[2]||(l[2]=r=>e(s).ip_address=r),invalid:!!e(s).errors.ip_address,variant:e(s).ip_address?"filled":"outlined",fluid:""},null,8,["modelValue","invalid","variant"]),l[9]||(l[9]=i("label",{for:"ip"},"IP Address",-1))]),_:1}),e(s).errors.ip_address?(u(),v("span",te,f(e(s).errors.ip_address),1)):c("",!0)])]),i("div",le,[t(e(p),{type:"button",severity:"secondary",label:"Cancel",onClick:$}),t(e(p),{type:"submit",label:"Simpan",disabled:e(s).processing},null,8,["disabled"])])],32)]),_:1},8,["visible","header"]),t(e(W),null,{message:a(({message:r})=>[i("div",re,[i("p",ie,f(r.message),1)])]),_:1}),t(e(z))])]),_:1})],64))}});export{he as default};
