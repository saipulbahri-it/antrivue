import{A as le}from"./ApplicationLogo-BY06AJv4.js";import{$ as N,d as ae,f as ce,x as de,r as z,c as O,o as W,a as F,e as a,u as H,g as ue,b as I,j as pe,t as L,F as Y,O as me,s as he}from"./app-BWNrNjCQ.js";import{s as fe}from"./index-Dk6ixdfn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-a8w4ol-7.js";import"./index-D-cxfG7v.js";var ge=Object.defineProperty,G=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,K=(e,t,n)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U=(e,t)=>{for(var n in t||(t={}))ye.call(t,n)&&K(e,n,t[n]);if(G)for(var n of G(t))be.call(t,n)&&K(e,n,t[n]);return e},$=(e,t,n)=>new Promise((i,c)=>{var h=o=>{try{d(n.next(o))}catch(l){c(l)}},f=o=>{try{d(n.throw(o))}catch(l){c(l)}},d=o=>o.done?i(o.value):Promise.resolve(o.value).then(h,f);d((n=n.apply(e,t)).next())});function V(e){return!!e.shadowRoot}let J=!1;function we(){if(J)return;class e extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}}customElements.define("vue-to-print-shadow-dom",e),J=!0}const ve=`
  class VueToPrintShadowDom extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: 'open' });
    }
  }
  customElements.define('vue-to-print-shadow-dom', VueToPrintShadowDom);
`;function xe(e){const t=e.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("vue-to-print-custom-script","registry-shadow-dom"),t.innerHTML=ve,e.body.appendChild(t)}const Se=`
  function retrieveStyleSheets(styleSheetMap) {
    styleSheetMap.forEach((styleSheetStrings, tagName) => {
      const styleSheets = [];
      for (let i = styleSheetStrings.length; i--;) {
        const styleSheet = new CSSStyleSheet();
        styleSheet.replaceSync(styleSheetStrings[i]);
        styleSheets.push(styleSheet);
      }

      const elements = document.querySelectorAll('vue-to-print-shadow-dom[original-tag-name=' + tagName + ']');
      for (let i = elements.length; i--;) {
        const element = elements[i];
        element.shadowRoot.adoptedStyleSheets = styleSheets;
      }
    });
  }
`;function Ee(e){const t=e.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("vue-to-print-custom-script","registry-retrieve-style-sheets-func"),t.innerHTML=Se,e.body.appendChild(t)}const R=new Map;function X(e){we();const t=e.nodeName.toLowerCase(),n=e.shadowRoot.adoptedStyleSheets,i=document.createElement("vue-to-print-shadow-dom");i.setAttribute("original-tag-name",t),R.has(t)||R.set(t,new Set);const c=R.get(t);for(let d=n.length;d--;)c.add(n[d]);const h=i.attributes,f=e.attributes;for(let d=f.length;d--;)h.setNamedItem(f[d].cloneNode());return i}function Ae(){const e=new Map,t=new Map,n=Array.from(R.keys());for(let i=n.length;i--;){const c=[],h=n[i],f=Array.from(R.get(h));for(let d=f.length;d--;){const o=f[d];if(!t.has(o)){let l="";const r=Array.from(o.cssRules);for(let s=r.length;s--;)l+=r[s].cssText;t.set(o,l)}c.push(t.get(o))}e.set(h,c)}return e}function Ne(e){const t=e.contentWindow||null;if(!t)throw new Error("Cannot access print window");const n=t.document;if(!n)throw new Error("Cannot access print document");xe(n),Ee(n);const i=Ae();t.retrieveStyleSheets(i)}function Z(e){return!!customElements.get(e.nodeName.toLowerCase())}let Q=!1;function ke(){if(Q)return;class e extends HTMLElement{constructor(){super()}}customElements.define("vue-to-print-custom-element",e),Q=!0}function _(e){ke();const t=e.nodeName.toLowerCase(),n=document.createElement("vue-to-print-custom-element");n.setAttribute("original-tag-name",t);const i=n.attributes,c=e.attributes;for(let h=c.length;h--;)i.setNamedItem(c[h].cloneNode());return n}function te(e){return $(this,null,function*(){e.getAttribute("src")&&(e.complete||(yield new Promise((t,n)=>{e.addEventListener("load",t,{once:!0}),e.addEventListener("error",i=>n(i.error),{once:!0})})))})}function Ce(e){return $(this,null,function*(){e.readyState>=2||(yield new Promise((t,n)=>{e.addEventListener("loadeddata",t,{once:!0}),e.addEventListener("error",i=>n(i.error),{once:!0}),e.addEventListener("stalled",()=>n(new Error("Loading video stalled, skipping")),{once:!0})}))})}function Te(e){const t=e.cloneNode(),n=t.getContext("2d");return n&&n.drawImage(e,0,0),t}function Le(e,t){const n=e.cloneNode();return t.push(te(n)),n}function Pe(e,t){const n=e.cloneNode();n.preload="auto";const i=n.getAttribute("poster");if(i){const c=new Image;c.src=i,t.push(te(c))}else t.push(Ce(n));return n}function De(e){const t=e.cloneNode();switch(e.type){case"checkbox":case"radio":t.checked=e.checked;break;default:t.value=e.value;break}return t}function Me(e){const t=e.cloneNode();return t.value=e.value,t}function Re(e){const t=e.cloneNode();return t.selected=e.selected,t}const ee=new Map([["canvas",Te],["img",Le],["video",Pe],["input",De],["select",Me],["option",Re]]);function $e(e){return e.cloneNode()}function je(e,t=[]){const n=e.nodeName.toLowerCase();return(ee.has(n)?ee.get(n):$e)(e,t)}function Oe(e){var t;if(e.nodeName.toLowerCase()==="slot"){const n=e.assignedNodes();return n.length>0?n:Array.from(e.childNodes)}else return Array.from(((t=e.shadowRoot)!=null?t:e).childNodes)}function We(e){return $(this,null,function*(){const t=new Map,n=[];let i;V(e)?i=X(e):Z(e)?i=_(e):i=e.cloneNode(),t.set(e,i);const c=[e];for(;c.length;){const h=c.shift(),f=Oe(h);if(f.length<=0)continue;const d=t.get(h),o=V(d)?d.shadowRoot:d;for(let l=0;l<f.length;l++){const r=f[l];let s;V(r)?s=X(r):Z(r)?s=_(r):s=je(r,n),t.set(r,s),c.push(r),o.appendChild(s)}}return{node:i,result:yield Promise.allSettled(n)}})}const Fe={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1};function He(e){e=U(U({},Fe),e);let t=0,n=[],i=[];const c=r=>{const s=e.onAfterPrint,u=e.onPrintError,m=e.print,g=N(e.documentTitle);setTimeout(()=>{var x,k;if(r.contentWindow)if(r.contentWindow.focus(),m)Promise.resolve(m(r)).then(()=>s==null?void 0:s()).then(()=>o()).catch(p=>{u?u("print",p):l(["An error was thrown by the specified `print` function"])});else{if(r.contentWindow.print){const p=(k=(x=r.contentDocument)==null?void 0:x.title)!=null?k:"",j=r.ownerDocument.title;g&&(r.ownerDocument.title=g,r.contentDocument&&(r.contentDocument.title=g)),r.contentWindow.print(),g&&(r.ownerDocument.title=j,r.contentDocument&&(r.contentDocument.title=p))}else l(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);s==null||s(),o()}else l(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `vue-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},h=r=>{const s=e.onBeforePrint,u=e.onPrintError;if(s){const m=s();m&&typeof m.then=="function"?m.then(()=>{c(r)}).catch(g=>{u&&u("onBeforePrint",g)}):c(r)}else c(r)},f=()=>{const r=e.onBeforeGetContent,s=e.onPrintError;if(r){const u=r();u&&typeof u.then=="function"?u.then(d).catch(m=>{s&&s("onBeforeGetContent",m)}):d()}else d()},d=()=>$(this,null,function*(){const r=N(e.bodyClass),s=N(e.content),u=N(e.copyStyles),m=N(e.fonts),g=N(e.pageStyle),x=N(e.nonce);let k;if(s instanceof HTMLElement?k=s:s.$el&&(k=s.$el.nodeName==="#text"?s.$el.parentElement:s.$el),k===void 0){l(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"]);return}if(k===null){l(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "vue-to-print" to be called.']);return}const p=document.createElement("iframe");p.width=`${document.documentElement.clientWidth}px`,p.height=`${document.documentElement.clientHeight}px`,p.style.position="absolute",p.style.top=`-${document.documentElement.clientHeight+100}px`,p.style.left=`-${document.documentElement.clientWidth+100}px`,p.id="printWindow",p.srcdoc="<!DOCTYPE html>";const j=k;if(!j){l(['"vue-to-print" could not locate the DOM node corresponding with the `content` prop']);return}const{node:ne,result:oe}=yield We(j);for(const S of oe)S.status!=="fulfilled"&&l(["An error occurred while cloning the content to print. Printing will continue, but some content may be missing.",`Error: ${S.reason}`],"warning");const re=document.querySelectorAll("link[rel~='stylesheet']"),se=m?m.length:0;t=re.length+se,n=[],i=[];const C=(S,P)=>{if(n.includes(S)){l(["Tried to mark a resource that has already been handled",S],"debug");return}P?(l(['"vue-to-print" was unable to load a resource but will continue attempting to print the page',...P]),i.push(S)):n.push(S),n.length+i.length===t&&h(p)};p.onload=()=>$(this,null,function*(){var S,P;p.onload=null;const v=p.contentDocument||((S=p.contentWindow)==null?void 0:S.document);if(v){v.body.appendChild(ne),m&&((P=p.contentDocument)!=null&&P.fonts&&typeof FontFace<"u"?m.forEach(y=>{const E=new FontFace(y.family,y.source,{weight:y.weight,style:y.style});p.contentDocument.fonts.add(E),E.loaded.then(()=>{C(E)}).catch(B=>{C(E,["Failed loading the font:",E,"Load error:",B])})}):(m.forEach(y=>C(y)),l(['"vue-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));const q=typeof g=="function"?g():g;if(typeof q!="string")l([`"vue-to-print" expected a "string" from \`pageStyle\` but received "${typeof q}". Styles from \`pageStyle\` will not be applied.`]);else{const y=v.createElement("style");x&&(y.setAttribute("nonce",x),v.head.setAttribute("nonce",x)),y.appendChild(v.createTextNode(q)),v.head.appendChild(y)}if(r&&v.body.classList.add(...r.split(" ")),u){const y=document.querySelectorAll("style, link[rel~='stylesheet']");for(let E=0,B=y.length;E<B;++E){const b=y[E];if(b.tagName.toLowerCase()==="style"){const w=v.createElement(b.tagName),A=b.sheet;if(A){let D="";try{const T=A.cssRules.length;for(let M=0;M<T;++M)typeof A.cssRules[M].cssText=="string"&&(D+=`${A.cssRules[M].cssText}\r
`)}catch{l(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",b],"warning")}w.setAttribute("id",`vue-to-print-${E}`),x&&w.setAttribute("nonce",x),w.appendChild(v.createTextNode(D)),v.head.appendChild(w)}}else if(b.getAttribute("href"))if(b.hasAttribute("disabled"))l(["`vue-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",b],"warning"),C(b);else{const w=v.createElement(b.tagName);for(let A=0,D=b.attributes.length;A<D;++A){const T=b.attributes[A];T&&w.setAttribute(T.nodeName,T.nodeValue||"")}w.onload=()=>C(w),w.onerror=(A,D,T,M,ie)=>C(w,["Failed to load",w,"Error:",ie]),x&&w.setAttribute("nonce",x),v.head.appendChild(w)}else l(["`vue-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",b],"warning"),C(b)}}}Ne(p),(t===0||!u)&&h(p)}),o(!0),document.body.appendChild(p)}),o=r=>{const s=N(e.removeAfterPrint);if(r||s){const u=document.getElementById("printWindow");u&&document.body.removeChild(u)}},l=(r,s="error")=>{N(e.suppressErrors)||(s==="error"?console.error(r):s==="warning"?console.warn(r):s==="debug"&&console.debug(r))};return{handlePrint:f}}const qe={class:"mx-auto my-5 flex h-screen flex-1 flex-col items-center justify-around"},Be={class:"flex flex-col gap-2 text-center"},Ie={class:"text-center"},Ve={key:0,style:{"text-align":"center","font-size":"20px"},class:"w-full"},ze={style:{"font-size":"50px"}},Ye={class:"m-5 grid grid-cols-1 gap-8 sm:grid-cols-1 lg:grid-cols-2"},Ge={class:"flex w-full justify-between gap-5 p-3"},Ke={class:"mr-10 flex flex-col items-baseline text-left"},Ue={class:"text-xl font-bold sm:text-2xl lg:text-xl"},Je={class:"hidden"},Xe={style:{"text-align":"center","font-size":"20px"}},Ze={style:{"font-size":"50px"}},rt=ae({__name:"Ticket",props:{services:Array,queue:Object},setup(e){const t=ce(),n=de({service_id:null}),i=d=>{n.service_id=d,n.post("/ticket",{headers:{Accept:"application/json"},onSuccess:()=>{h.value=!0,t.add({severity:"info",group:"bc",life:3e3}),f()},onError:()=>{}})},c=z(),h=z(!1),{handlePrint:f}=He({content:c,documentTitle:"Tiket Nomor Antrian"});return(d,o)=>{var l,r,s;return W(),O(Y,null,[F(H(ue),{title:"Ambil Nomor"}),a("div",qe,[o[11]||(o[11]=a("img",{id:"background",class:"absolute -left-20 top-0 max-w-[877px]",src:"/images/background.svg"},null,-1)),a("div",Be,[a("div",Ie,[F(le)]),o[0]||(o[0]=a("h1",{class:"text-4xl font-bold uppercase"},"Ambil Nomor",-1)),o[1]||(o[1]=a("p",{class:"mt-1 text-lg text-gray-600"}," Silahkan pilih layanan yang ingin Anda ambil nomornya ",-1))]),F(H(fe),{group:"bc",class:"right-0 flex flex-col text-center"},{closeicon:I(()=>o[2]||(o[2]=[])),message:I(()=>{var u,m,g;return[e.queue?(W(),O("div",Ve,[o[3]||(o[3]=a("p",null,"=== Nomor Antrian ===",-1)),a("h1",ze,L((u=e.queue)==null?void 0:u.number),1),a("h3",null,L((g=(m=e.queue)==null?void 0:m.service)==null?void 0:g.name),1),o[4]||(o[4]=a("p",null,"=====================",-1)),a("p",null,L(new Date().toLocaleString()),1),o[5]||(o[5]=a("p",null,"=====================",-1))])):pe("",!0)]}),_:1}),a("div",Ye,[(W(!0),O(Y,null,me(e.services,u=>(W(),O("div",{key:u.id,class:"w-full"},[F(H(he),{label:"Ambil Nomor",class:"p-button-secondary rounded-5 flex-start flex w-full shadow-lg",icon:"pi pi-print",onClick:m=>i(u.id),disabled:H(n).processing},{default:I(()=>[a("div",Ge,[a("div",Ke,[o[6]||(o[6]=a("div",{class:"text-black-500"},"Layanan",-1)),a("h2",Ue,L(u.name),1)]),o[7]||(o[7]=a("i",{class:"pi pi-print",style:{"font-size":"3rem"}},null,-1))])]),_:2},1032,["onClick","disabled"])]))),128))]),o[12]||(o[12]=a("div",null,"Kiosk",-1)),a("div",Je,[a("div",{ref_key:"componentRef",ref:c},[a("div",Xe,[o[8]||(o[8]=a("p",null,"=== Nomor Antrian ===",-1)),a("h1",Ze,L((l=e.queue)==null?void 0:l.number),1),a("h3",null,L((s=(r=e.queue)==null?void 0:r.service)==null?void 0:s.name),1),o[9]||(o[9]=a("p",null,"=====================",-1)),a("p",null,L(new Date().toLocaleString()),1),o[10]||(o[10]=a("p",null,"=====================",-1))])],512)])])],64)}}});export{rt as default};
