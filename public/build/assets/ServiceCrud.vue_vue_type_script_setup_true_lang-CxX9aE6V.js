import{d as $,f as E,r as v,x as V,h as q,c as p,o as m,a as t,b as n,u as e,e as r,t as u,s as f,i as N,j as x,F as D,W as M}from"./app-DjmU4WO1.js";import{s as o,a as B}from"./index-DHFx_CwJ.js";import{s as y}from"./index-BFgpnwwa.js";import{s as b}from"./index-Dri6EmXD.js";import{s as U}from"./index-C3dUI9Id.js";import{s as W}from"./index-BCSsZ7UM.js";const F={class:"flex items-center justify-between"},L={class:"flex justify-between"},z={class:"text-sm text-gray-500"},A={class:"flex gap-3"},P={class:"font-bold"},Q={class:"flex justify-end gap-2 text-end"},T={class:"inline-flex flex-col gap-2"},Y={key:0,class:"text-sm text-red-500"},G={class:"inline-flex flex-col gap-2"},H={key:0,class:"text-sm text-red-500"},I={class:"flex justify-between gap-2"},se=$({__name:"ServiceCrud",props:{services:{}},setup(J){const d=E(),c=v(!1),_=v(null),s=V({id:null,name:"",prefix:""}),h=()=>{s.reset(),c.value=!0},g=a=>{s.id=a.id,s.name=a.name,s.prefix=a.prefix??"",c.value=!0},C=()=>{s.id&&(s.reset(),c.value=!1)},S=()=>{s.id?s.put(`/service/${s.id}`,{preserveScroll:!0,onSuccess:()=>{d.add({severity:"success",summary:"Success",detail:"service updated successfully",life:3e3}),s.reset(),c.value=!1},onError:a=>{console.error("Error updating service:",a)}}):s.post("/service",{preserveScroll:!0,onSuccess:()=>{d.add({severity:"success",summary:"Success",detail:"service saved successfully",life:3e3}),s.reset(),c.value=!1},onError:a=>{console.error("Error saving service:",a)}})},w=q(),j=a=>{w.require({message:`Are you sure you want to delete this service ${a.name} ?`,header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Yes",rejectLabel:"No",acceptClass:"p-button-danger",accept:()=>{M.delete(`/service/${a.id}`,{preserveScroll:!0,onSuccess:()=>{d.add({severity:"info",summary:"Success",detail:"service deleted successfully",life:3e3})},onError:l=>{d.add({severity:"error",summary:"Error",detail:l[0],life:3e3})}})},reject:()=>{_.value=null,d.add({severity:"warn",summary:"Cancelled",detail:"service deletion cancelled",life:3e3})}})};return(a,l)=>(m(),p(D,null,[t(e(B),{size:"small",value:a.services,class:"text-sm","show-gridlines":""},{header:n(()=>[r("div",F,[l[3]||(l[3]=r("div",{class:"flex items-center gap-2"},[r("h3",{class:"text-lg font-semibold"},"Services")],-1)),t(e(f),{rounded:"",outlined:"",class:"p-button-sm p-button-success",icon:"pi pi-plus",onClick:h})])]),footer:n(()=>[r("div",L,[r("p",z,u(a.services.length)+" services ",1)])]),empty:n(()=>l[4]||(l[4]=[r("div",{class:"text-center"},[r("p",{class:"text-sm text-gray-500"},"No services found.")],-1)])),default:n(()=>[t(e(o),{field:"name",header:"Name"},{body:n(({data:i})=>[r("div",A,[r("span",null,u(i.name),1),r("span",P,u(i.prefix),1)])]),_:1}),t(e(o),{field:"queues_count",header:"Queue",class:"!justify-center !text-center","header-class":"!justify-center !block","body-class":"!text-center"}),t(e(o),{field:"queues_waiting_count",header:"Waiting",class:"!text-center","header-class":"!justify-center","body-class":"!text-center"}),t(e(o),{field:"queues_calling_count",header:"Calling",class:"!text-center","header-class":"!justify-center","body-class":"!text-center"}),t(e(o),{field:"queues_called_count",header:"Called",class:"!text-center","header-class":"!justify-center","body-class":"!text-center"}),t(e(o),{field:"queues_skipped_count",header:"Skipped",class:"!text-center","header-class":"!justify-center","body-class":"!text-center"}),t(e(o),{field:"queues_done_count",header:"Done",class:"!text-center","header-class":"!justify-center","body-class":"!text-center"}),t(e(o),{"header-class":"text-center",sortable:!1},{body:n(({data:i})=>[r("div",Q,[t(e(f),{rounded:"",icon:"pi pi-pencil",class:"p-button-sm",outlined:"",severity:"info",onClick:k=>g(i)},null,8,["onClick"]),t(e(f),{rounded:"",icon:"pi pi-trash",class:"p-button-sm",outlined:"",severity:"warn",onClick:k=>j(i)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"]),t(e(U),{visible:c.value,"onUpdate:visible":l[2]||(l[2]=i=>c.value=i),modal:"",header:e(s).id?"Edit service":"New service",style:{width:"35rem"}},{default:n(()=>[r("form",{class:"flex w-full flex-col gap-4",onSubmit:N(S,["prevent"])},[r("div",T,[t(e(y),{variant:"in"},{default:n(()=>[t(e(b),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":l[0]||(l[0]=i=>e(s).name=i),invalid:!!e(s).errors.name,variant:e(s).name?"filled":"outlined",fluid:""},null,8,["modelValue","invalid","variant"]),l[5]||(l[5]=r("label",{for:"name"},"Name",-1))]),_:1}),e(s).errors.name?(m(),p("span",Y,u(e(s).errors.name),1)):x("",!0)]),r("div",G,[t(e(y),{variant:"in"},{default:n(()=>[t(e(b),{id:"prefix",modelValue:e(s).prefix,"onUpdate:modelValue":l[1]||(l[1]=i=>e(s).prefix=i),invalid:!!e(s).errors.prefix,variant:e(s).prefix?"filled":"outlined"},null,8,["modelValue","invalid","variant"]),l[6]||(l[6]=r("label",{for:"name"},"Prefix",-1))]),_:1}),e(s).errors.prefix?(m(),p("span",H,u(e(s).errors.prefix),1)):x("",!0)]),r("div",I,[t(e(f),{type:"button",severity:"secondary",label:"Cancel",onClick:C}),t(e(f),{type:"submit",label:"Simpan",disabled:e(s).processing},null,8,["disabled"])])],32)]),_:1},8,["visible","header"]),t(e(W))],64))}});export{se as _};
