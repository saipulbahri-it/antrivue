import{t as w,a as C,i as R}from"./index-v5uf1LwW.js";import{U as i,H as h,w as c,$ as u,V,a0 as b}from"./app-I_EO46gW.js";const B=R?window:void 0;function D(){const o=i(!1),a=b();return a&&V(()=>{o.value=!0},a),o}function E(o){const a=D();return h(()=>(a.value,!!o()))}function I(o,a={}){const{pitch:m=1,rate:S=1,volume:g=1,window:v=B}=a,n=v&&v.speechSynthesis,r=E(()=>n),s=i(!1),l=i("init"),y=w(o||""),f=w(a.lang||"en-US"),p=i(void 0),U=(e=!s.value)=>{s.value=e},d=e=>{e.lang=u(f),e.voice=u(a.voice)||null,e.pitch=u(m),e.rate=u(S),e.volume=g,e.onstart=()=>{s.value=!0,l.value="play"},e.onpause=()=>{s.value=!1,l.value="pause"},e.onresume=()=>{s.value=!0,l.value="play"},e.onend=()=>{s.value=!1,l.value="end"},e.onerror=x=>{p.value=x}},t=h(()=>{s.value=!1,l.value="init";const e=new SpeechSynthesisUtterance(y.value);return d(e),e}),M=()=>{n.cancel(),t&&n.speak(t.value)},k=()=>{n.cancel(),s.value=!1};return r.value&&(d(t.value),c(f,e=>{t.value&&!s.value&&(t.value.lang=e)}),a.voice&&c(a.voice,()=>{n.cancel()}),c(s,()=>{s.value?n.resume():n.pause()})),C(()=>{s.value=!1}),{isSupported:r,isPlaying:s,status:l,utterance:t,error:p,stop:k,toggle:U,speak:M}}export{I as u};
