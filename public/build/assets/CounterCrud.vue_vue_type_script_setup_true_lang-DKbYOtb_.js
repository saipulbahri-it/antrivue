import{d as V,f as E,r as _,x as N,h as j,c as p,o as m,a as t,b as o,u as e,e as l,s as c,t as f,i as q,j as v,F as D,W as M}from"./app-I_EO46gW.js";import{s as n,a as U}from"./index-C73n7zrQ.js";import{s as y}from"./index-C_foQk9X.js";import{s as b}from"./index-Bxm6Fxdt.js";import{s as B}from"./index-BY2ky7-Z.js";import{s as A}from"./index-C-1LINfG.js";import{s as F}from"./index-Dvo0EJPa.js";import{s as L}from"./index-Dz7WN_FH.js";const P={class:"flex items-center justify-between"},W={class:"flex justify-between"},z={class:"text-sm text-gray-500"},I={class:"flex justify-end gap-2 text-end"},Q={class:"inline-flex flex-col gap-2"},T={key:0,class:"text-sm text-red-500"},Y={class:"flex justify-between gap-5"},G={class:"inline-flex flex-col gap-2"},H={key:0,class:"text-sm text-red-500"},J={class:"inline-flex w-full flex-col gap-2"},K={key:0,class:"text-sm text-red-500"},O={class:"flex justify-between gap-2"},ae=V({__name:"CounterCrud",props:{counters:{},services:{}},setup(R){const u=E(),d=_(!1),x=_(null),s=N({id:null,name:"",service_id:null,ip_address:null}),C=()=>{s.reset(),d.value=!0},g=i=>{s.id=i.id,s.name=i.name,s.service_id=i.service_id,s.ip_address=i.ip_address,d.value=!0},h=()=>{s.id&&(s.reset(),d.value=!1)},w=()=>{s.id?s.put(`/counter/${s.id}`,{preserveScroll:!0,onSuccess:()=>{u.add({severity:"success",summary:"Success",detail:"Counter updated successfully",life:3e3}),s.reset(),d.value=!1},onError:i=>{console.error("Error updating Counter:",i)}}):s.post("/counter",{preserveScroll:!0,onSuccess:()=>{u.add({severity:"success",summary:"Success",detail:"Counter saved successfully",life:3e3}),s.reset(),d.value=!1},onError:i=>{console.error("Error saving Counter:",i)}})},S=j(),k=i=>{S.require({message:`Are you sure you want to delete this Counter ${i.name} ?`,header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Yes",rejectLabel:"No",acceptClass:"p-button-danger",accept:()=>{M.delete(`/counter/${i.id}`,{preserveScroll:!0,onSuccess:()=>{u.add({severity:"info",summary:"Success",detail:"Counter deleted successfully",life:3e3})},onError:r=>{u.add({severity:"error",summary:"Error",detail:r[0],life:3e3})}})},reject:()=>{x.value=null,u.add({severity:"warn",summary:"Cancelled",detail:"Counter deletion cancelled",life:3e3})}})};return(i,r)=>(m(),p(D,null,[t(e(U),{size:"small",value:i.counters,class:"text-sm"},{header:o(()=>[l("div",P,[r[4]||(r[4]=l("div",{class:"flex items-center gap-2"},[l("h3",{class:"text-lg font-semibold"},"Counters")],-1)),t(e(c),{rounded:"",outlined:"",class:"p-button-sm p-button-success",icon:"pi pi-plus",onClick:C})])]),footer:o(()=>[l("div",W,[l("p",z,f(i.counters.length)+" counters ",1)])]),empty:o(()=>r[5]||(r[5]=[l("div",{class:"text-center"},[l("p",{class:"text-sm text-gray-500"},"No counters found.")],-1)])),default:o(()=>[t(e(n),{field:"name",header:"Name"}),t(e(n),{field:"service.name",header:"Service"}),t(e(n),{field:"user.name",header:"Petugas"}),t(e(n),{field:"queues_count",header:"Queues"}),t(e(n),{field:"queues_skipped_count",header:"Skip"}),t(e(n),{field:"queues_done_count",header:"Done"}),t(e(n),{field:"last_queue_called.number",header:"Calling Number"}),t(e(n),{"header-class":"text-center",sortable:!1},{body:o(({data:a})=>[l("div",I,[t(e(c),{rounded:"",icon:"pi pi-pencil",class:"p-button-sm",outlined:"",severity:"info",onClick:$=>g(a)},null,8,["onClick"]),t(e(c),{rounded:"",icon:"pi pi-trash",class:"p-button-sm",outlined:"",severity:"warn",onClick:$=>k(a)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"]),t(e(F),{visible:d.value,"onUpdate:visible":r[3]||(r[3]=a=>d.value=a),modal:"",header:e(s).id?"Edit Counter":"New Counter",style:{width:"35rem"}},{default:o(()=>[l("form",{class:"flex w-full flex-col gap-4",onSubmit:q(w,["prevent"])},[l("div",Q,[t(e(y),{variant:"in"},{default:o(()=>[t(e(b),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":r[0]||(r[0]=a=>e(s).name=a),invalid:!!e(s).errors.name,variant:e(s).name?"filled":"outlined",fluid:""},null,8,["modelValue","invalid","variant"]),r[6]||(r[6]=l("label",{for:"name"},"Name",-1))]),_:1}),e(s).errors.name?(m(),p("span",T,f(e(s).errors.name),1)):v("",!0)]),l("div",Y,[l("div",G,[t(e(B),{class:"w-full md:w-56"},{default:o(()=>[t(e(A),{id:"service",modelValue:e(s).service_id,"onUpdate:modelValue":r[1]||(r[1]=a=>e(s).service_id=a),options:i.services,"option-value":"id","option-label":"name",placeholder:"Select Service",invalid:!!e(s).errors.service_id,class:"w-full",variant:e(s).service_id?"filled":"outlined"},null,8,["modelValue","options","invalid","variant"]),r[7]||(r[7]=l("label",{for:"service"}," Service ",-1))]),_:1}),e(s).errors.service_id?(m(),p("span",H,f(e(s).errors.service_id),1)):v("",!0)]),l("div",J,[t(e(y),{variant:"in"},{default:o(()=>[t(e(b),{id:"ip_address",modelValue:e(s).ip_address,"onUpdate:modelValue":r[2]||(r[2]=a=>e(s).ip_address=a),invalid:!!e(s).errors.ip_address,variant:e(s).ip_address?"filled":"outlined",fluid:""},null,8,["modelValue","invalid","variant"]),r[8]||(r[8]=l("label",{for:"ip"},"IP Address",-1))]),_:1}),e(s).errors.ip_address?(m(),p("span",K,f(e(s).errors.ip_address),1)):v("",!0)])]),l("div",O,[t(e(c),{type:"button",severity:"secondary",label:"Cancel",onClick:h}),t(e(c),{type:"submit",label:"Simpan",disabled:e(s).processing},null,8,["disabled"])])],32)]),_:1},8,["visible","header"]),t(e(L))],64))}});export{ae as _};
